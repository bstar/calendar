import { Meta, Source, Story, Canvas } from '@storybook/addon-docs/blocks';
import { CLACalendar } from './CLACalendar';
import * as CalendarStories from './CLACalendar.stories';
import { configurationExamples } from './utils/storybook-docs';

<Meta title="Documentation/Calendar Configuration Guide" />

# CLACalendar Configuration Guide

The CLACalendar component is a highly configurable React date picker that supports layers, restrictions, theming, and multiple display modes. This guide covers all configuration options with practical examples.

> **üí° Pro Tip**: All features in this guide can be tested interactively! Every story includes comprehensive Storybook controls that let you experiment with settings in real-time without writing code. Jump to the [Interactive Testing & Exploration](#interactive-testing--exploration) section to learn how.

## Table of Contents

1. [Basic Configuration](#basic-configuration)
2. [Display Modes](#display-modes)
3. [Layer System](#layer-system)
4. [Restrictions](#restrictions)
5. [Theming](#theming)
6. [Advanced Features](#advanced-features)

---

## Basic Configuration

The simplest calendar configuration requires only a few properties:

<Source
  code={JSON.stringify(configurationExamples.basic, null, 2)}
  language="json"
/>

<Canvas>
  <Story of={CalendarStories.Default} />
</Canvas>

### Core Properties

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>displayMode</code></td>
      <td><code>'popup'</code> or <code>'embedded'</code></td>
      <td><code>'popup'</code></td>
      <td>How the calendar is displayed</td>
    </tr>
    <tr>
      <td><code>visibleMonths</code></td>
      <td><code>number</code></td>
      <td><code>2</code></td>
      <td>Number of months shown (1-6)</td>
    </tr>
    <tr>
      <td><code>selectionMode</code></td>
      <td><code>'single'</code> or <code>'range'</code></td>
      <td><code>'range'</code></td>
      <td>Date selection behavior</td>
    </tr>
    <tr>
      <td><code>showSubmitButton</code></td>
      <td><code>boolean</code></td>
      <td><code>true</code></td>
      <td>Show confirmation button</td>
    </tr>
  </tbody>
</table>

---

## Display Modes

### Popup Mode (Default)
Shows the calendar in an overlay that can be opened/closed:

<Source
  code={JSON.stringify({
    displayMode: 'popup',
    isOpen: true,
    closeOnClickAway: true,
    showSubmitButton: true
  }, null, 2)}
  language="json"
/>

### Embedded Mode
Displays the calendar inline within the page:

<Source
  code={JSON.stringify(configurationExamples.embedded, null, 2)}
  language="json"
/>

### Single Date Selection
For selecting one date instead of ranges:

<Source
  code={JSON.stringify(configurationExamples.singleDate, null, 2)}
  language="json"
/>

<Canvas>
  <Story of={CalendarStories.SingleSelection} />
</Canvas>

---

## Layer System

Layers allow you to display different types of content (events, backgrounds, restrictions) that users can toggle between.

### Basic Layer Configuration

<Source
  code={JSON.stringify({
    showLayersNavigation: true,
    defaultLayer: 'Events',
    layers: [
      {
        name: 'Events',
        title: 'Calendar Events',
        description: 'Important dates and meetings',
        visible: true,
        data: {
          events: [
            {
              date: '2024-01-15',
              title: 'Team Meeting',
              type: 'meeting',
              time: '10:00 AM',
              description: 'Weekly team sync',
              color: '#3B82F6'
            }
          ],
          background: [
            {
              startDate: '2024-01-10',
              endDate: '2024-01-12',
              color: '#FEF3C7'
            }
          ]
        }
      }
    ]
  }, null, 2)}
  language="json"
/>

### Multiple Layers Example

See the [Layers and Navigation stories](/story/features-layers--multiple-layers) for interactive examples of multiple layers with background colors.

### Layer Properties

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code></td>
      <td><code>string</code></td>
      <td>‚úÖ</td>
      <td>Unique identifier for the layer</td>
    </tr>
    <tr>
      <td><code>title</code></td>
      <td><code>string</code></td>
      <td>‚úÖ</td>
      <td>Display name in navigation</td>
    </tr>
    <tr>
      <td><code>description</code></td>
      <td><code>string</code></td>
      <td>‚ùå</td>
      <td>Tooltip text for the layer</td>
    </tr>
    <tr>
      <td><code>visible</code></td>
      <td><code>boolean</code></td>
      <td>‚ùå</td>
      <td>Whether layer is initially visible</td>
    </tr>
    <tr>
      <td><code>required</code></td>
      <td><code>boolean</code></td>
      <td>‚ùå</td>
      <td>Whether layer can be toggled off</td>
    </tr>
    <tr>
      <td><code>data.events</code></td>
      <td><code>Event[]</code></td>
      <td>‚ùå</td>
      <td>Array of event objects</td>
    </tr>
    <tr>
      <td><code>data.background</code></td>
      <td><code>BackgroundRange[]</code></td>
      <td>‚ùå</td>
      <td>Array of background color ranges</td>
    </tr>
  </tbody>
</table>

### Event Object Structure

<Source
  code={JSON.stringify({
    date: '2024-01-15',
    title: 'Team Meeting',
    type: 'meeting',
    time: '10:00 AM',
    description: 'Weekly team synchronization meeting',
    color: '#3B82F6'
  }, null, 2)}
  language="json"
/>

### Background Range Structure

<Source
  code={JSON.stringify({
    startDate: '2024-01-10',
    endDate: '2024-01-12',
    color: '#FEF3C7'
  }, null, 2)}
  language="json"
/>

---

## Restrictions

The restriction system allows you to control which dates users can select, with custom validation messages.

### Restriction Types

#### 1. Date Range Restrictions
Block specific date ranges:

<Source
  code={JSON.stringify({
    restrictionConfig: {
      restrictions: [
        {
          type: 'daterange',
          enabled: true,
          ranges: [
            {
              start: '2024-01-15',
              end: '2024-01-19',
              message: 'Holiday week - no bookings allowed'
            }
          ]
        }
      ]
    }
  }, null, 2)}
  language="json"
/>

See the [Restrictions stories](/story/features-restrictions--date-range-restrictions) for interactive examples.

#### 2. Boundary Restrictions
Block dates before/after a specific date:

<Source
  code={JSON.stringify({
    restrictionConfig: {
      restrictions: [
        {
          type: 'boundary',
          enabled: true,
          date: '2024-01-10',
          direction: 'before',
          message: 'Cannot book before January 10th'
        }
      ]
    }
  }, null, 2)}
  language="json"
/>

#### 3. Weekday Restrictions
Block specific days of the week:

<Source
  code={JSON.stringify({
    restrictionConfig: {
      restrictions: [
        {
          type: 'weekday',
          enabled: true,
          days: [0, 6],
          message: 'Weekend bookings not allowed'
        }
      ]
    }
  }, null, 2)}
  language="json"
/>

#### 4. Allowed Ranges Only
Only allow selection within specific ranges:

<Source
  code={JSON.stringify({
    restrictionConfig: {
      restrictions: [
        {
          type: 'allowedranges',
          enabled: true,
          ranges: [
            {
              start: '2024-01-08',
              end: '2024-01-12',
              message: 'Available for booking'
            }
          ]
        }
      ]
    }
  }, null, 2)}
  language="json"
/>

---

## Theming

Customize the calendar's appearance with color themes:

<Source
  code={JSON.stringify(configurationExamples.customTheme, null, 2)}
  language="json"
/>

### Available Color Properties

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>primary</code></td>
      <td><code>#3B82F6</code></td>
      <td>Main accent color</td>
    </tr>
    <tr>
      <td><code>success</code></td>
      <td><code>#10B981</code></td>
      <td>Success/confirmation color</td>
    </tr>
    <tr>
      <td><code>warning</code></td>
      <td><code>#F59E0B</code></td>
      <td>Warning/caution color</td>
    </tr>
    <tr>
      <td><code>danger</code></td>
      <td><code>#EF4444</code></td>
      <td>Error/danger color</td>
    </tr>
    <tr>
      <td><code>purple</code></td>
      <td><code>#8B5CF6</code></td>
      <td>Purple accent</td>
    </tr>
    <tr>
      <td><code>teal</code></td>
      <td><code>#14B8A6</code></td>
      <td>Teal accent</td>
    </tr>
    <tr>
      <td><code>orange</code></td>
      <td><code>#F97316</code></td>
      <td>Orange accent</td>
    </tr>
    <tr>
      <td><code>pink</code></td>
      <td><code>#EC4899</code></td>
      <td>Pink accent</td>
    </tr>
  </tbody>
</table>

---

## Embedded Widget Styling

When using the calendar as an embedded widget, you may want to remove the popup-style appearance and make it blend seamlessly with your application. Here are configurations for different embedded widget treatments:

### Flat Embedded Widget

Remove shadows, borders, and rounded corners for a flat, integrated appearance:

<Source
  code={JSON.stringify({
    displayMode: 'embedded',
    visibleMonths: 1,
    selectionMode: 'range',
    showSubmitButton: false,
    showHeader: true,
    showFooter: false,
    containerStyle: {
      boxShadow: 'none',
      border: 'none',
      borderRadius: '0',
      backgroundColor: 'transparent'
    }
  }, null, 2)}
  language="json"
/>

### Subtle Card Widget

Card-like appearance with subtle styling:

<Source
  code={JSON.stringify({
    displayMode: 'embedded',
    visibleMonths: 1,
    selectionMode: 'single',
    showSubmitButton: true,
    showHeader: true,
    showFooter: true,
    containerStyle: {
      boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
      border: '1px solid #d1d5db',
      borderRadius: '8px',
      backgroundColor: '#ffffff'
    }
  }, null, 2)}
  language="json"
/>

### Compact Sidebar

Optimized for sidebar placement with reduced width:

<Source
  code={JSON.stringify({
    displayMode: 'embedded',
    visibleMonths: 1,
    selectionMode: 'single',
    showSubmitButton: true,
    showHeader: true,
    showFooter: false,
    monthWidth: 280,
    containerStyle: {
      boxShadow: 'none',
      border: '1px solid #e5e7eb',
      borderRadius: '0'
    }
  }, null, 2)}
  language="json"
/>

### Form Integration

Styled to blend with form elements:

<Source
  code={JSON.stringify({
    displayMode: 'embedded',
    visibleMonths: 1,
    selectionMode: 'range',
    showSubmitButton: true,
    showHeader: false,
    showFooter: true,
    containerStyle: {
      boxShadow: 'inset 0 1px 2px rgba(0, 0, 0, 0.1)',
      border: '2px solid #d1d5db',
      borderRadius: '6px',
      backgroundColor: '#ffffff'
    }
  }, null, 2)}
  language="json"
/>

### Container Style Properties

Use the `containerStyle` property to override the default calendar container styling:

<Source
  code={`// Remove all popup styling
{
  containerStyle: {
    boxShadow: 'none',
    border: 'none',
    borderRadius: '0',
    backgroundColor: 'transparent'
  }
}

// Subtle border only
{
  containerStyle: {
    boxShadow: 'none',
    border: '1px solid #e5e7eb',
    borderRadius: '0'
  }
}

// Form input styling
{
  containerStyle: {
    boxShadow: 'inset 0 1px 2px rgba(0, 0, 0, 0.1)',
    border: '2px solid #d1d5db',
    borderRadius: '6px',
    backgroundColor: '#ffffff'
  }
}`}
  language="javascript"
/>

### Implementation Notes

**Removing Popup Styling:**
- Use `containerStyle: { boxShadow: 'none' }` to remove drop shadows
- Use `containerStyle: { border: 'none' }` to remove borders completely
- Use `containerStyle: { borderRadius: '0' }` for sharp corners

**Key Container Style Properties:**
- `boxShadow` - Controls drop shadow (set to 'none' for flat appearance)
- `border` - Border styling (set to 'none' or custom border)
- `borderRadius` - Corner rounding (set to '0' for sharp corners)
- `backgroundColor` - Background color (set to 'transparent' to inherit)
- `padding` - Internal spacing
- `margin` - External spacing

**Responsive Considerations:**
- Use `monthWidth` property to control calendar width
- Consider `visibleMonths: 1` for mobile-friendly embedded widgets
- Test different `monthWidth` values for optimal sidebar integration

**Common Embedded Patterns:**
```javascript
// Completely flat
containerStyle: { boxShadow: 'none', border: 'none', borderRadius: '0' }

// Subtle border
containerStyle: { boxShadow: 'none', border: '1px solid #e5e7eb', borderRadius: '0' }

// Form-like styling
containerStyle: { boxShadow: 'inset 0 1px 2px rgba(0,0,0,0.1)', border: '2px solid #d1d5db' }
```

---

## Advanced Features

### Date Formatting

<Source
  code={JSON.stringify({
    dateFormatter: (date) => date.toLocaleDateString('en-US', {
      weekday: 'short',
      month: 'short',
      day: 'numeric'
    }),
    dateRangeSeparator: ' ‚Üí '
  }, null, 2)}
  language="javascript"
/>

### Default Date Range

<Source
  code={JSON.stringify({
    defaultRange: {
      start: '2024-01-15',
      end: '2024-01-20'
    }
  }, null, 2)}
  language="json"
/>

### UI Customization

<Source
  code={JSON.stringify({
    showHeader: true,
    showFooter: true,
    showTooltips: true,
    showLayersNavigation: true,
    startWeekOnSunday: false,
    showMonthHeadings: true,
    monthWidth: 400
  }, null, 2)}
  language="json"
/>

### Interaction Settings

<Source
  code={JSON.stringify({
    closeOnClickAway: true,
    enableOutOfBoundsScroll: true,
    suppressTooltipsOnSelection: false,
    showSelectionAlert: true
  }, null, 2)}
  language="json"
/>

---

## Complete Configuration Example

Here's a comprehensive example showing most available options:

<Source
  code={JSON.stringify({
    // Display Settings
    displayMode: 'popup',
    isOpen: true,
    visibleMonths: 2,
    selectionMode: 'range',
    
    // UI Settings
    showHeader: true,
    showFooter: true,
    showSubmitButton: true,
    showTooltips: true,
    showLayersNavigation: true,
    showMonthHeadings: true,
    startWeekOnSunday: false,
    
    // Interaction Settings
    closeOnClickAway: true,
    enableOutOfBoundsScroll: true,
    showSelectionAlert: true,
    
    // Date Settings
    defaultRange: {
      start: '2024-01-01',
      end: '2024-01-05'
    },
    dateRangeSeparator: ' - ',
    
    // Layer Configuration
    defaultLayer: 'Events',
    layers: [
      {
        name: 'Events',
        title: 'Calendar Events',
        description: 'Important meetings and deadlines',
        visible: true,
        data: {
          events: [
            {
              date: '2024-01-15',
              title: 'Important Meeting',
              type: 'meeting',
              time: '10:00 AM',
              description: 'Project planning session',
              color: '#3B82F6'
            }
          ],
          background: [
            {
              startDate: '2024-01-10',
              endDate: '2024-01-12',
              color: '#FEF3C7'
            }
          ]
        }
      }
    ],
    
    // Restrictions
    restrictionConfig: {
      restrictions: [
        {
          type: 'weekday',
          enabled: true,
          days: [0, 6],
          message: 'Weekend bookings not available'
        }
      ]
    },
    
    // Theme Colors
    colors: {
      primary: '#8B5CF6',
      success: '#10B981',
      warning: '#F59E0B',
      danger: '#EF4444'
    },
    
    // Layout Settings
    monthWidth: 400
  }, null, 2)}
  language="json"
/>

---

## TypeScript Interfaces

For TypeScript users, the main configuration interface is:

<Source
  code={`interface CalendarSettings {
  // Core Settings
  displayMode?: 'embedded' | 'popup';
  visibleMonths?: number;
  selectionMode?: 'single' | 'range';
  isOpen?: boolean;
  
  // UI Settings
  showTooltips?: boolean;
  showHeader?: boolean;
  showFooter?: boolean;
  showSubmitButton?: boolean;
  showLayersNavigation?: boolean;
  showMonthHeadings?: boolean;
  startWeekOnSunday?: boolean;
  
  // Interaction Settings
  closeOnClickAway?: boolean;
  enableOutOfBoundsScroll?: boolean;
  suppressTooltipsOnSelection?: boolean;
  showSelectionAlert?: boolean;
  
  // Date Settings
  defaultRange?: { start: string; end: string };
  dateFormatter?: (date: Date) => string;
  dateRangeSeparator?: string;
  
  // Layer Settings
  layers?: Layer[];
  defaultLayer?: string;
  restrictionConfig?: RestrictionConfig;
  
  // Theme Settings
  colors?: {
    primary?: string;
    success?: string;
    warning?: string;
    danger?: string;
    purple?: string;
    teal?: string;
    orange?: string;
    pink?: string;
  };
  
  // Layout Settings
  monthWidth?: number;
}`}
  language="typescript"
/>

---

## Interactive Testing & Exploration

**üéõÔ∏è All CLACalendar features can be tested interactively using Storybook controls!**

Every story in this Storybook includes comprehensive controls that let you:

- **Real-time Configuration**: Change any setting and see immediate results
- **No Code Required**: Test all features without writing configuration code
- **Complete Coverage**: Every CalendarSettings property has a working control
- **Visual Feedback**: See exactly how each setting affects the calendar

### üîß Available Interactive Controls

**Core Settings:**
- **Display Mode**: Switch between popup and embedded modes
- **Visible Months**: Adjust from 1-6 months (range slider)
- **Month Width**: Control calendar width (200-600px)
- **Selection Mode**: Toggle between single date and range selection

**UI Features:**
- **Start Week on Sunday**: Toggle week start day (Sunday vs Monday)
- **Show Header**: Toggle navigation header on/off
- **Show Footer**: Toggle action footer on/off  
- **Show Submit Button**: Control submit button visibility
- **Show Tooltips**: Enable/disable hover tooltips
- **Show Layers Navigation**: Toggle layer tabs visibility

**Advanced Settings:**
- **Timezone**: Select from multiple timezone options
- **Position**: Control popup positioning (for popup mode)
- **Date Range Separator**: Customize range separator text
- **Font Size**: Adjust base font size

### üìñ How to Use Interactive Controls

1. **Navigate to any story** (Default, Restrictions, Embedded Widgets, etc.)
2. **Open the Controls panel** at the bottom of Storybook
3. **Adjust any setting** using the controls
4. **Watch the calendar update** in real-time
5. **Experiment freely** - all combinations are supported!

### üß™ Recommended Testing Flow

**Basic Exploration:**
1. Start with the **Default** story
2. Try changing `visibleMonths` to see 1-6 month layouts
3. Toggle `startWeekOnSunday` to see week layout changes
4. Switch `selectionMode` between single and range

**Feature Testing:**
1. Visit **Layers & Navigation** stories to test layer functionality
2. Use **Restrictions** stories to understand validation rules  
3. Try **Embedded Widgets** stories for integration examples
4. Explore the **Year Round Calendar** for advanced features

**Edge Case Testing:**
1. Combine multiple restrictions in **Mixed Restrictions**
2. Test embedded styling with different `monthWidth` values
3. Try various timezone settings with date selection
4. Test accessibility with `showTooltips` disabled

---

## Getting Started

The CLACalendar component is designed to be flexible and easy to use. Here's how to get started:

<Source
  code={`import { CLACalendar } from './CLACalendar';

// Basic usage
<CLACalendar 
  settings={{
    displayMode: 'popup',
    visibleMonths: 2,
    selectionMode: 'range'
  }}
  onSubmit={(startDate, endDate) => {
    console.log('Selected:', startDate, endDate);
  }}
/>`}
  language="jsx"
/>