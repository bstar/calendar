/**
 * Defensive CSS for Calendar Widget
 * 
 * This file contains defensive styles to protect the calendar widget from external style interference.
 * These styles ensure the calendar maintains consistent appearance regardless of the host application.
 * 
 * Benefits:
 * - Protects against CSS inheritance issues
 * - Ensures proper layout and component positioning 
 * - Maintains font sizes and text styling
 * - Preserves proper z-index stacking for tooltips and portals
 * 
 * Import this file in any project where you use the calendar widget.
 */

/* Main wrapper protection */
.cla-calendar-wrapper,
.cla-calendar-portal {
  isolation: isolate !important;
  position: relative !important;
  display: inline-block !important;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  line-height: 1.5 !important;
  box-sizing: border-box !important;
  max-width: 100% !important;
}

/* When calendar is open, ensure high z-index */
.cla-calendar-wrapper[data-open="true"] {
  z-index: 2147483647 !important;
}

/* Apply box-sizing to all child elements */
.cla-calendar-wrapper *,
.cla-calendar-portal * {
  box-sizing: border-box !important;
}

/* Calendar portal for popup styles */
.cla-calendar-portal {
  position: fixed !important;
  z-index: 2147483647 !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
}

/* Tooltip container and styles */
.tooltip {
  position: fixed !important;
  background-color: #1a1a1a !important;
  color: #ffffff !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.35) !important;
  border-radius: 3px !important;
  z-index: 2147483647 !important;
  font-size: 13px !important;
  max-width: 300px !important;
  padding: 3px 6px !important;
  pointer-events: none !important;
  border: none !important;
  margin-top: 5px !important;
  opacity: 1 !important;
}

/* Reset text properties on calendar */
.cla-calendar,
.cla-calendar * {
  text-align: initial !important;
  text-transform: none !important;
  letter-spacing: normal !important;
  text-decoration: none !important;
  text-shadow: none !important;
}

/* Grid protection */
.cla-calendar [style*="display: grid"] {
  display: grid !important;
}

/* Restricted date pattern */
.restricted-date-pattern {
  background-image: repeating-linear-gradient(
    45deg,
    rgba(150, 150, 150, 0.25) 0px,
    rgba(150, 150, 150, 0.25) 2px,
    rgba(255, 255, 255, 0.7) 2px,
    rgba(255, 255, 255, 0.7) 6px
  ) !important;
  background-size: 8.5px 8.5px !important;
}

/* Form controls */
.cla-calendar-wrapper input,
.cla-calendar-portal input,
.cla-form-control {
  font-family: inherit !important;
  font-size: inherit !important;
  line-height: inherit !important;
  background-color: #fff !important;
}

/* Calendar header */
.cla-calendar .cla-header {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  padding: 16px !important;
  border-bottom: 1px solid #e0e0e0 !important;
  background-color: white !important;
  width: 100% !important;
  margin: 0 !important;
}

/* Fix for chevron navigation buttons */
.cla-calendar .cla-button-nav {
  width: 32px !important;
  height: 32px !important;
  min-width: 32px !important; /* Ensure minimum width */
  flex: 0 0 32px !important; /* Prevent shrinking */
  padding: 8px !important; /* Ensure consistent padding */
  margin: 0 4px !important; /* Add margin for better spacing */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: none !important; /* Reset to transparent background */
  border: none !important; /* No border */
  border-radius: 4px !important;
  cursor: pointer !important;
  transition: background-color 0.2s ease !important;
}

.cla-calendar .cla-button-nav:hover {
  background-color: #f5f5f5 !important; /* Match secondary button default color */
}

/* Ensure consistent chevron styling */
.cla-calendar .cla-chevron {
  display: block !important;
  width: 10px !important;
  height: 10px !important;
  position: relative !important;
  color: #333 !important; /* Base color */
}

.cla-calendar .cla-button-nav:hover .cla-chevron {
  color: #666 !important; /* Lighter gray on hover */
}

.cla-calendar .cla-chevron::before {
  content: '' !important;
  position: absolute !important;
  width: 8px !important;
  height: 8px !important;
  border-style: solid !important;
  border-width: 2px 2px 0 0 !important;
  border-color: currentColor !important; /* Uses the color from parent */
  top: 50% !important;
  left: 50% !important;
}

.cla-calendar .cla-chevron-left::before {
  transform: translate(-25%, -50%) rotate(-135deg) !important;
}

.cla-calendar .cla-chevron-right::before {
  transform: translate(-75%, -50%) rotate(45deg) !important;
}

/* Date input section fixes */
.cla-calendar .date-input-section,
.cla-calendar .cla-input-container {
  display: flex !important;
  flex-wrap: nowrap !important; /* Prevent wrapping */
  padding: 16px !important;
  gap: 8px !important; /* Reduced gap between inputs */
  border-bottom: 1px solid #e0e0e0 !important;
  width: 100% !important;
  background-color: #f8f9fa !important;
  box-sizing: border-box !important;
}

/* Date input wrapper fixes */
.cla-calendar .cla-input-wrapper,
.cla-calendar .date-input-container {
  flex: 1 1 0 !important; /* Equal width with min-width override below */
  min-width: 0 !important; /* Allow shrinking below content size */
  position: relative !important;
  margin: 0 !important;
  isolation: isolate !important;
}

/* Date input styling */
.cla-calendar .date-input {
  width: 100% !important; 
  min-width: 0 !important;
  max-width: 100% !important;
  padding: 8px 10px !important; /* Slightly reduced side padding */
  border-radius: 4px !important;
  background-color: white !important;
  color: #333 !important;
  transition: border-color 0.15s ease !important;
  cursor: text !important;
  border: 1px solid #ccc !important;
  margin: 0 !important;
  box-sizing: border-box !important;
  font-family: inherit !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
  text-align: left !important; /* Left align text */
  -webkit-appearance: none !important;
  appearance: none !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

/* Date input indicator position */
.cla-calendar .date-input-indicator {
  position: absolute !important;
  right: 8px !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  z-index: 2 !important;
  pointer-events: none !important;
}

/* Input container additional styles */
.cla-calendar .cla-input-container {
  display: flex !important;
  flex-direction: row !important;
  flex-wrap: nowrap !important;
  width: 100% !important;
  padding: 16px !important;
  gap: 8px !important; /* Reduced gap between inputs */
  margin: 0 !important;
  background-color: #f8f9fa !important;
  border-bottom: 1px solid #e0e0e0 !important;
  box-sizing: border-box !important;
}

/* Force single-mode to respect width constraints */
.cla-calendar .cla-input-container.single .cla-input-wrapper {
  flex: 1 1 auto !important;
  width: auto !important;
}

/* Handle single vs range mode input section differently */
.cla-calendar .cla-input-container.single .date-input-container {
  /* No max-width needed */
}

/* Adjust width constraints based on calendar width */
@media (max-width: 500px) {
  .cla-calendar .date-input-container,
  .cla-calendar .cla-input-wrapper {
    flex-basis: 0 !important;
    min-width: 0 !important;
  }
  
  .cla-calendar .date-input {
    font-size: 13px !important;
    padding: 8px 8px !important;
  }
} 