/* 
 * Accessibility improvements for WCAG 2.1 AA compliance
 * Minimum contrast ratios:
 * - Normal text: 4.5:1
 * - Large text (18pt or 14pt bold): 3:1
 * - UI components and graphics: 3:1
 */

/* High contrast focus indicators */
.cla-calendar *:focus {
  outline: 3px solid #005fcc;
  outline-offset: 2px;
}

.cla-calendar *:focus:not(:focus-visible) {
  outline: none;
}

.cla-calendar *:focus-visible {
  outline: 3px solid #005fcc;
  outline-offset: 2px;
}

/* Fix low contrast text issues */

/* Month headers - increase contrast from #333 to #1a1a1a */
.cla-month-header {
  color: #1a1a1a !important; /* Contrast 13.1:1 on white */
}

/* Disabled/other month days - increase contrast from #6c757d to #595959 */
.cla-day-cell.other-month,
.cla-day-cell.disabled,
.cla-calendar .other-month {
  color: #595959 !important; /* Contrast 7.5:1 on white */
}

/* Form controls - increase contrast from #444 to #1a1a1a */
.cla-form-control,
.date-input {
  color: #1a1a1a !important; /* Contrast 13.1:1 on white */
}

/* Navigation buttons - improve contrast for inactive state */
.cla-button-nav {
  color: #1a1a1a !important; /* Contrast 13.1:1 on white */
}

.cla-button-nav:hover {
  background-color: rgba(0, 0, 0, 0.08) !important;
}

/* Layer control buttons - improve contrast from #666 to #4a4a4a */
.cla-layer-button {
  color: #4a4a4a !important; /* Contrast 8.9:1 on white */
}

/* Active layer button - ensure sufficient contrast */
.cla-layer-button.active {
  background-color: #0056b3 !important; /* Darker blue */
  color: #ffffff !important;
  border-color: #004494 !important;
}

/* Selected dates - improve contrast */
.cla-day-cell.selected,
.cla-day-cell.range-start,
.cla-day-cell.range-end {
  background-color: #0056b3 !important; /* Darker blue, contrast 4.5:1 */
  color: #ffffff !important;
}

/* Range middle dates - ensure sufficient contrast */
.cla-day-cell.range-middle {
  background-color: #cce5ff !important; /* Light blue with better contrast */
  color: #004085 !important; /* Dark blue text, contrast 8.6:1 */
}

/* Ensure all range cells have consistent size */
.day-cell.range-start,
.day-cell.range-end,
.day-cell.range-middle,
.day-cell.selected {
  width: 36px !important;
  height: 36px !important;
  margin: 0 !important;
  padding: 1px 0 !important;
}

/* Range-specific rounded corners */
.day-cell.range-start:not(.range-end) {
  border-radius: 50% 0 0 50% !important;
}

.day-cell.range-end:not(.range-start) {
  border-radius: 0 50% 50% 0 !important;
}

.day-cell.range-middle {
  border-radius: 0 !important;
}

/* Single day selection - full circle */
.day-cell.single-day,
.day-cell.range-start.range-end {
  border-radius: 50% !important;
}

/* Today's date - improve visibility */
.cla-day-cell.today {
  border: 2px solid #0056b3 !important;
  font-weight: bold;
}

/* Error states - ensure sufficient contrast */
.cla-notification-error,
.error-message {
  background-color: #f8d7da !important;
  color: #721c24 !important; /* Contrast 9.1:1 */
  border-color: #f5c6cb !important;
}

/* Success states */
.cla-notification-success {
  background-color: #d4edda !important;
  color: #155724 !important; /* Contrast 11.9:1 */
  border-color: #c3e6cb !important;
}

/* Input focus states - improve visibility */
.cla-form-control:focus,
.date-input:focus {
  border-color: #0056b3 !important;
  box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.25) !important;
}

/* Button hover states - ensure contrast is maintained */
.cla-button-primary:hover {
  background-color: #343a40 !important;
  color: #ffffff !important;
}

.cla-button-secondary:hover {
  background-color: #e2e2e2 !important;
  color: #1a1a1a !important;
  border-color: #999999 !important;
}

/* Link colors - improve contrast */
.cla-calendar a {
  color: #0056b3 !important; /* Contrast 4.5:1 */
}

.cla-calendar a:hover {
  color: #004494 !important; /* Darker on hover */
}

/* Tooltip contrast improvements */
.cla-tooltip {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
  font-size: 14px;
  font-weight: 500;
}

/* Restricted dates - improve visibility without pattern */
.cla-day-cell.restricted {
  opacity: 0.6 !important;
  cursor: not-allowed !important;
  background-color: #f5f5f5 !important;
  color: #595959 !important;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .cla-calendar {
    border: 2px solid #000000 !important;
  }
  
  .cla-day-cell {
    border: 1px solid #000000 !important;
  }
  
  .cla-day-cell.selected,
  .cla-day-cell.range-start,
  .cla-day-cell.range-end {
    background-color: #000000 !important;
    color: #ffffff !important;
  }
  
  .cla-button-primary {
    background-color: #000000 !important;
    color: #ffffff !important;
    border: 2px solid #000000 !important;
  }
  
  .cla-button-secondary {
    background-color: #ffffff !important;
    color: #000000 !important;
    border: 2px solid #000000 !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .cla-calendar *,
  .cla-calendar *::before,
  .cla-calendar *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus visible polyfill for older browsers */
.js-focus-visible :focus:not(.focus-visible) {
  outline: none;
}

/* Skip link for keyboard navigation */
.cla-skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #000000;
  color: #ffffff;
  padding: 8px;
  text-decoration: none;
  z-index: 100;
}

.cla-skip-link:focus {
  top: 0;
}

/* Status messages for screen readers */
.cla-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Ensure interactive elements have minimum size (44x44px) */
.cla-day-cell {
  min-width: 44px !important;
  min-height: 44px !important;
}

.cla-button,
.cla-layer-button {
  min-height: 44px !important;
  min-width: 44px !important;
}

/* Improve visibility of current selection for keyboard users */
.cla-day-cell:focus {
  z-index: 10;
  box-shadow: 0 0 0 3px #005fcc inset !important;
}

/* Ensure tooltips don't block interaction */
.cla-tooltip {
  pointer-events: none;
}

/* Fix rounded corner bleed-through */
.cla-card > *:first-child {
  border-radius: 8px 8px 0 0;
  overflow: hidden;
}

/* Ensure proper clipping for calendar container */
.cla-card {
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  transform: translateZ(0);
}