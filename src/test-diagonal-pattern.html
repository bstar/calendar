<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagonal Pattern Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .controls {
            margin-bottom: 20px;
        }
        
        .control-group {
            margin: 10px 0;
        }
        
        label {
            display: inline-block;
            width: 150px;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 200px;
            margin: 0 10px;
        }
        
        .value-display {
            display: inline-block;
            width: 50px;
            text-align: center;
            font-family: monospace;
        }
        
        /* Test pattern similar to the calendar */
        .test-grid {
            display: grid;
            grid-template-columns: repeat(7, 40px);
            gap: 1px;
            width: fit-content;
            background: #ddd;
            padding: 1px;
        }
        
        .test-cell {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            position: relative;
            font-size: 12px;
        }
        
        .test-cell.restricted {
            background: none !important;
            overflow: hidden;
        }
        
        .test-cell.restricted::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: repeating-linear-gradient(
                45deg,
                transparent 0,
                transparent 4px,
                rgba(128, 128, 128, 0.25) 4px,
                rgba(128, 128, 128, 0.25) 7px
            );
            background-attachment: fixed;
            background-position: 
                var(--diagonal-pattern-offset-x, 0px) 
                var(--diagonal-pattern-offset-y, 0px);
            pointer-events: none;
            z-index: 1;
        }
        
        .test-cell.restricted::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(128, 128, 128, 0.05);
            z-index: 2;
            pointer-events: none;
        }
        
        .test-cell span {
            position: relative;
            z-index: 3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Diagonal Pattern Offset Test</h1>
        <p>This test verifies if diagonal pattern offset controls work correctly.</p>
        
        <div class="controls">
            <div class="control-group">
                <label>X Offset:</label>
                <input type="range" id="offsetX" min="-20" max="20" value="3" step="1">
                <span class="value-display" id="offsetXValue">3px</span>
            </div>
            
            <div class="control-group">
                <label>Y Offset:</label>
                <input type="range" id="offsetY" min="-20" max="20" value="3" step="1">
                <span class="value-display" id="offsetYValue">3px</span>
            </div>
        </div>
        
        <div class="test-grid" id="testGrid">
            <!-- Grid will be populated by JavaScript -->
        </div>
    </div>

    <script>
        // Create test grid
        const grid = document.getElementById('testGrid');
        
        // Create 6 weeks x 7 days = 42 cells
        for (let i = 0; i < 42; i++) {
            const cell = document.createElement('div');
            cell.className = 'test-cell';
            
            // Make some cells restricted for testing
            if (i % 7 === 0 || i % 7 === 6) { // Weekends
                cell.classList.add('restricted');
            }
            
            const span = document.createElement('span');
            span.textContent = (i % 31) + 1; // Day numbers
            cell.appendChild(span);
            
            grid.appendChild(cell);
        }
        
        // Control handlers
        const offsetXSlider = document.getElementById('offsetX');
        const offsetYSlider = document.getElementById('offsetY');
        const offsetXValue = document.getElementById('offsetXValue');
        const offsetYValue = document.getElementById('offsetYValue');
        
        function updatePattern() {
            const x = offsetXSlider.value;
            const y = offsetYSlider.value;
            
            offsetXValue.textContent = x + 'px';
            offsetYValue.textContent = y + 'px';
            
            // Update CSS custom properties on the test grid
            grid.style.setProperty('--diagonal-pattern-offset-x', x + 'px');
            grid.style.setProperty('--diagonal-pattern-offset-y', y + 'px');
            
            console.log('Updated pattern offset:', { x, y });
        }
        
        offsetXSlider.addEventListener('input', updatePattern);
        offsetYSlider.addEventListener('input', updatePattern);
        
        // Initialize
        updatePattern();
    </script>
</body>
</html>